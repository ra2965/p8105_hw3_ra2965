p8105\_hw3\_ra2965
================

Problem 1
=========

``` r
devtools::install_github("p8105/p8105.datasets")
library(p8105.datasets)
data(instacart)
```

Instacart is an online grocery service that allows people to shop online from local stores. This dataset describes the details of the online orders at Instacart. The dataset instacart contains 1384617 rows and 15 variables, where each row in the dataset is a product from an order. There is a single order per user in this dataset.

There are 15 variables in this dataset including the identifiers for the products, orders and customers, for example:

add\_to\_cart\_order: order in which each product was added to cart

reordered: indicator of whether this prodcut has been ordered by this user in the past

eval\_set: which evaluation set this order belongs in

order\_number: the order sequence number for this user

order\_dow: the day of the week on which the order was placed

order\_hour\_of\_day: the hour of the day on which the order was placed

days\_since\_prior\_order: days since the last order, capped at 30, product\_name: name of the product

aisle: the name of the aisle

department: the name of the department

giving illstrative examples of observations:
--------------------------------------------

Take the first observation as an example: It records the product 49302, which is Bulgarian Yogurt, in the first order recorded of the user 112108. It belongs in the evaluation set of train. The order sequence number for this user is 4. The order was placed in the 10th hour in the day and it is the 4th day of the week. There are 9 days since the last order. The aisle id is 120 and the name of the aisle is yogurt.The product is in the department of dairy eggs.

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────── tidyverse 1.2.1 ──

    ## ✔ ggplot2 3.2.1     ✔ purrr   0.3.2
    ## ✔ tibble  2.1.3     ✔ dplyr   0.8.3
    ## ✔ tidyr   1.0.0     ✔ stringr 1.4.0
    ## ✔ readr   1.3.1     ✔ forcats 0.4.0

    ## ── Conflicts ────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()

``` r
instacart %>% group_by(aisle) %>% summarize(n = n()) %>% arrange(desc(n))
```

    ## # A tibble: 134 x 2
    ##    aisle                              n
    ##    <chr>                          <int>
    ##  1 fresh vegetables              150609
    ##  2 fresh fruits                  150473
    ##  3 packaged vegetables fruits     78493
    ##  4 yogurt                         55240
    ##  5 packaged cheese                41699
    ##  6 water seltzer sparkling water  36617
    ##  7 milk                           32644
    ##  8 chips pretzels                 31269
    ##  9 soy lactosefree                26240
    ## 10 bread                          23635
    ## # … with 124 more rows

Answer the questions:
---------------------

There are 134 aisles, and the most items ordered from is fresh vegetables.

``` r
library(ggridges)
```

    ## 
    ## Attaching package: 'ggridges'

    ## The following object is masked from 'package:ggplot2':
    ## 
    ##     scale_discrete_manual

``` r
plot_df = instacart %>% 
  group_by(aisle) %>% 
  summarize(n = n()) %>% 
  filter(n > 10000) %>% 
  mutate(aisle = as.factor(aisle), 
         aisle = forcats::fct_reorder(aisle, n))
    
  ggplot(plot_df,aes(x = aisle, y = n)) + 
    geom_point(alpha = 0.6) +
    labs(
    title = "The number of items ordered in each aisle",
    x = "aisle",
    y = "number of items") +
    scale_y_continuous(
    breaks  = c(20000, 40000,  60000,  80000,  100000, 120000, 140000, 160000), 
    limits = c(9000, 160000)
    ) + theme(axis.text.x = element_text(angle = 60, hjust = 1))
```

![](p8105_hw3_ra2965_files/figure-markdown_github/aisle%20plot-1.png)

``` r
popular_product = instacart %>% filter(aisle == "baking ingredients"|aisle == "dog food care"|aisle == "packaged vegetables fruits") %>% 
  group_by(aisle, product_name) %>%
  summarize(n_pop_pro = n()) %>%
  filter(min_rank(desc(n_pop_pro)) < 4)
view(popular_product)
```
